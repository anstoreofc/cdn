<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Sidebar</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts (Poppins) -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <!-- Custom CSS -->
</head>
<body>
  <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">AN Pedia</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="monitoring.html">Monitoring Transaction</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="information.html">Information Center</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://wa.me/62895606423692">Contact Admin</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>
    <div class="itil">
    <div class="card success">
     <!--- <i class="fas fa-check-circle"></i> --->
      <div class="info">
        <h3>TRANSAKSI SUKSES</h3>
        <p id="successCount">0</p>
        <small id="successSync">Sinkron terakhir</small>
      </div>
    </div>
    <div class="card process">
     <!---<i class="fas fa-sync-alt"></i> --->
      <div class="info">
        <h3>TRANSAKSI PENDING</h3>
        <p id="processCount">0</p>
        <small id="processSync">Sinkron terakhir</small>
      </div>
    </div>
    <div class="card failed">
        <!---   <i class="fas fa-times-circle"></i> --->
      <div class="info">
        <h3>TRANSAKSI GAGAL</h3>
        <p id="failedCount">0</p>
        <small id="failedSync">Sinkron terakhir</small>
      </div>
    </div>
  </div>
  <br>
  <br>
  <div class="text-center mt-4">
  <h5>Trakteer AN Pedia</h5>
  <div class="d-flex justify-content-center gap-3">
    <button class="btn btn-danger">
      <i class="fas fa-qrcode me-2"></i>Scan Qris
    </button>
    <button class="btn btn-danger">
      <i class="fas fa-dollar-sign me-2"></i>Saweria
    </button>
  </div>
</div>
  <footer>
        &copy; 2024 AN Pedia. All Rights Reserved.
      </footer>
  <!-- Sidebar -->

  <script src="script.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Custom JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const sidebar = document.getElementById('sidebar');
      const openSidebarBtn = document.getElementById('openSidebarBtn');
      const closeSidebarBtn = document.getElementById('closeSidebarBtn');

      openSidebarBtn.addEventListener('click', () => {
        sidebar.classList.add('active');
      });

      closeSidebarBtn.addEventListener('click', () => {
        sidebar.classList.remove('active');
      });
    });
  </script>
</body>
  body {
    font-family: 'Poppins', sans-serif;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    padding-bottom: 50px;
    background-color: white;
}

main .content {
    flex: 1;
}

.navbar {
    margin-bottom: 20px;
}

.itil {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  margin: 0rem;
}

.card {
  display: flex;
  align-items: flex-start; /* Tetap mempertahankan posisi */
  gap: 0.8rem;
  width: 95%;
  padding: 1rem;
  border-radius: 8px;
  color: white;
  /*box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2), 0 -2px 4px rgba(255, 255, 255, 0.1);*/
  transform: translateY(0);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3), 0 -2px 6px rgba(255, 255, 255, 0.1);
}

.card i {
  font-size: 2rem;
}

.card.success {
  background-color: #4caf50;
}

.card.process {
  background-color: orange;
}

.card.failed {
  background-color: #f44336;
}
.info small {
  display: block;
  margin-top: 0.2rem;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.8); /* Warna teks lebih redup */
}

/* Ukuran teks dan angka */
.info h3 {
  margin: 0;
  font-size: 1.2rem; /* Ukuran sedikit diperbesar */
  font-weight: 600;
}

.info p {
  margin: 0; /* Menghilangkan ruang kosong di bawah angka */
  font-size: 1.2rem; /* Angka diperbesar sedikit */
  font-weight: 550;
}
h5 {
  font-weight: 600;
}

footer {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    background-color: black;
    color: white;
    text-align: center;
    line-height: normal;
    padding: 10px 0;
    font-size: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.1);
    height: 30px;
}
  const sheetUrl =
  "https://script.google.com/macros/s/AKfycbwSb-rkeX0hkKf0z8767ziHGtLdDsJAiLq5PtLfWw2cUK8MEnlTHycWWty4qB_ctbo0/exec";

const successCountEl = document.getElementById("successCount");
const processCountEl = document.getElementById("processCount");
const failedCountEl = document.getElementById("failedCount");

const successSyncEl = document.getElementById("successSync");
const processSyncEl = document.getElementById("processSync");
const failedSyncEl = document.getElementById("failedSync");

async function fetchData() {
  try {
    const response = await fetch(sheetUrl);
    const data = await response.json();

    const successCount = data.filter((item) => item.status === "Success").length;
    const processCount = data.filter((item) => item.status === "Pending").length;
    const failedCount = data.filter((item) => item.status === "Failed").length;

    successCountEl.textContent = successCount;
    processCountEl.textContent = processCount;
    failedCountEl.textContent = failedCount;

    // Ambil waktu saat sinkronisasi selesai
    const lastSync = new Date();
    const day = String(lastSync.getDate()).padStart(2, "0");
    const month = String(lastSync.getMonth() + 1).padStart(2, "0");
    const year = lastSync.getFullYear();
    const hours = String(lastSync.getHours()).padStart(2, "0");
    const minutes = String(lastSync.getMinutes()).padStart(2, "0");

    const formattedDate = `${day}/${month}/${year} ${hours}:${minutes} WIB`;

    // Tampilkan waktu sinkronisasi di bawah setiap angka
    successSyncEl.textContent = `Sinkron terakhir ${formattedDate}`;
    processSyncEl.textContent = `Sinkron terakhir ${formattedDate}`;
    failedSyncEl.textContent = `Sinkron terakhir ${formattedDate}`;
  } catch (error) {
    console.error("Error fetching data:", error);
  }
}

// Panggil fungsi fetchData
fetchData();

// Sinkronisasi setiap 60 detik
setInterval(fetchData, 60000);
</html>
